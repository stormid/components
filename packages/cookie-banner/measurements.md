# Measurements

If a Google Analytics tid configuration option is set when initialising the Cookie Banner instance, the following data will be sent to the Analytics account using the Google Measurement API.



## Persistent data
Sent with every measurement

| Parameter | Value                                                                   | Definition                                                                              |
| --------- | ----------------------------------------------------------------------- | --------------------------------------------------------------------------------------- |
| v         | 1                                                                       | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#v   |
| tid       | from settings                                                           | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#tid |
| ds        | 'cookiebanner'                                                          | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#ds  |
| z         | Cachebusting random string, generated by this library                   | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#z   |
| cid       | consentId - randomly generated and saved if cookie prefernces are saved | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#cid |
| uip       | '0.0.0.0'                                                               | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#uip |
| sr        | Screen resolution, detected by this library                             | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#sr  |
| vp        | Viewport size, detected by this library                                 | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#vp  |
| dh        | Hostname, detected by this library                                      | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#dh  |
| t         | 'event'                                                                 | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#t   |
| cd1       | Same as cid parameter                                                   | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#cd  |
| cd3       | Hostname (same as dh)                                                   | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#cd  |
| cd4       | 'consentAPI'                                                            | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#cd4 |


## Event data
### Banner displayed to user

| Parameter | Value      | Definition                                                                             |
| --------- | ---------- | -------------------------------------------------------------------------------------- |
| ec        | 'banner'   | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#ec |
| ea        | 'Displays' | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#ea |
| cm1       | 1          | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#cm |


### User clicks 'accept' on banner 

| Parameter | Value                                                                          | Definition                                                                             |
| --------- | ------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------- |
| ec        | 'Save Preferences'                                                             | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#ec |
| ea        | 'Banner'                                                                       | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#ea |
| cd2       | Comma separated string of all cookie categories, e.g. 'performance,thirdParty' | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#cd |
| cm2       | 1                                                                              | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#cm |
| cm3       | 1                                                                              | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#cm |


### User clicks 'options' on banner 

| Parameter | Value              | Definition                                                                             |
| --------- | ------------------ | -------------------------------------------------------------------------------------- |
| ec        | 'Banner'           | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#ec |
| ea        | 'Clicks'           | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#ea |
| el        | 'Edit Preferences' | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#el |
| cm4       | 1                  | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#cm |


### Cookie preferences form displays  

| Parameter | Value               | Definition                                                                             |
| --------- | ------------------- | -------------------------------------------------------------------------------------- |
| ec        | 'CookiePrefsWidget' | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#ec |
| ea        | 'Displays'          | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#ea |
| cm5       | 1                   | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#cm |


### User saves preferences on cookie preferences form

| Parameter | Value                                                                          | Definition                                                                             |
| --------- | ------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------- |
| ec        | 'Save Preferences'                                                       | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#ec |
| ea        | 'CookiePrefs'                                                            | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#ea |
| cd2       | Comma separated string of all cookie categories, e.g. 'performance,thirdParty' | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#cd |
| cm2       | 1 if performance is true, else 0 [1]                                     | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#cm |
| cm3       | 1 if thirdPatyr is true, else 0 [1]                                      | https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#cm |

[1] Note that the cm2 and cm3 parameters relate to specific cookie categories names - 'performance' and 'third party' cookies respectively.

Storm defines performance cookies as those that are used to provide anonymous measurements that are used to measure the performance of the web application only. Third party cookies are defined as those that Storm has no control over and includes advertising, marketing, and third party service cookies that are loaded via iframes, embeds, and external libraries.
